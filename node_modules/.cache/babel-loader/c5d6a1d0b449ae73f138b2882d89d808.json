{"ast":null,"code":"var _jsxFileName = \"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/src/modals/ReceiveModal.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React from 'react';\nimport './ReceiveModal.css';\nimport Modal from '../components/Modal';\nimport Wallet from '../services/Wallet';\nimport GhostButton from '../components/buttons/GhostButton';\nimport { copyToClipboard } from \"../utils/Utils\";\nimport Alerts from '../services/Alerts';\nimport { getNetworkFaucetId, getNetworkName } from \"../constants/Networks\";\nimport Dnero from \"../services/Dnero\";\nimport Api from \"../services/Api\";\nimport _ from 'lodash';\nimport Warning from \"../components/Warning\";\nimport { Urls } from \"../constants/Urls\";\nimport Config from '../Config';\nimport TransportWebUSB from \"@ledgerhq/hw-transport-webusb\";\nimport TransportU2F from \"@ledgerhq/hw-transport-u2f\";\nimport Eth from \"@ledgerhq/hw-app-eth\";\nexport default class ReceiveModal extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleCopyAddressClick = () => {\n      let address = Wallet.getWalletAddress();\n      copyToClipboard(address);\n      Alerts.showSuccess(\"Your address has been copied\");\n    };\n\n    this.handleDisplayOnLedgerClick = async () => {\n      try {\n        Alerts.showSuccess(\"Your address will be displayed on Ledger device\");\n        let transport;\n\n        if (navigator.userAgent.toLowerCase().indexOf('firefox') > -1) {\n          transport = await TransportU2F.create();\n        } else {\n          transport = await TransportWebUSB.create();\n        }\n\n        var eth = new Eth(transport);\n        await eth.getAddress(Wallet.getWalletPath(), true, false);\n      } catch (e) {\n        Alerts.showSuccess(\"Rejected, please refresh to change address\");\n      }\n    };\n\n    this.handleFaucetClick = async () => {\n      this.setState({\n        isLoading: true\n      });\n\n      try {\n        const response = await Api.callFaucet(Wallet.getWalletAddress(), getNetworkFaucetId(Dnero.getChainID()));\n        const responseJSON = await response.json();\n\n        if (_.get(responseJSON, 'message')) {\n          Alerts.showSuccess(\"Your DTOKEN has been sent.\");\n        }\n      } catch (e) {\n        Alerts.showError(\"You have exceeded the faucet limit\");\n      } finally {\n        this.setState({\n          isLoading: false\n        });\n      }\n    };\n\n    this.state = {\n      isLoading: false\n    };\n  }\n\n  render() {\n    const {\n      isLoading\n    } = this.state;\n    let address = Wallet.getWalletAddress();\n    let qrCodeURL = `https://chart.googleapis.com/chart?chs=160x160&cht=qr&chl=${address}&choe=UTF-8&chld=L|0`;\n    let hasFaucet = _.isNil(getNetworkFaucetId(Dnero.getChainID())) === false;\n    return /*#__PURE__*/React.createElement(Modal, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ReceiveModal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ModalTitle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }\n    }, \"Receive\"), /*#__PURE__*/React.createElement(Warning, {\n      message: 'Do not send ETH or ERC20 tokens to this address.',\n      learnMoreHref: Urls.PreventingLostTokens,\n      style: {\n        marginBottom: 30\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ReceiveModal__public-address-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 21\n      }\n    }, \"My Public Address\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ReceiveModal__public-address\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }\n    }, address), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ReceiveModal__buttons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(GhostButton, {\n      title: \"Copy\",\n      iconUrl: \"/img/icons/copy@2x.png\",\n      onClick: this.handleCopyAddressClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 25\n      }\n    })), Wallet.getWalletHardware() === 'ledger' && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ReceiveModal__buttons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(GhostButton, {\n      title: \"Display on Ledger\",\n      onClick: this.handleDisplayOnLedgerClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"img\", {\n      src: qrCodeURL,\n      className: \"ReceiveModal__qr\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 21\n      }\n    }), hasFaucet && Config.faucetAvailable && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ReceiveModal__faucet\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(GhostButton, {\n      title: \"Faucet\",\n      disabled: isLoading,\n      loading: isLoading,\n      className: \"ReceiveModal__faucet-button\",\n      iconUrl: \"/img/tab-bar/receive@2x.png\",\n      onClick: this.handleFaucetClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ReceiveModal__faucet-message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 29\n      }\n    }, \"Receive a small amount of DTOKEN on \", getNetworkName(Dnero.getChainID())))));\n  }\n\n  // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {\n    // @ts-ignore\n    this[key] = eval(code);\n  }\n\n}\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(ReceiveModal, \"ReceiveModal\", \"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/src/modals/ReceiveModal.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"names":["React","Modal","Wallet","GhostButton","copyToClipboard","Alerts","getNetworkFaucetId","getNetworkName","Dnero","Api","_","Warning","Urls","Config","TransportWebUSB","TransportU2F","Eth","ReceiveModal","Component","constructor","props","handleCopyAddressClick","address","getWalletAddress","showSuccess","handleDisplayOnLedgerClick","transport","navigator","userAgent","toLowerCase","indexOf","create","eth","getAddress","getWalletPath","e","handleFaucetClick","setState","isLoading","response","callFaucet","getChainID","responseJSON","json","get","showError","state","render","qrCodeURL","hasFaucet","isNil","PreventingLostTokens","marginBottom","getWalletHardware","faucetAvailable"],"sources":["/Users/jjestrella/DNERO_Protocol/dnerowebwallet/src/modals/ReceiveModal.js"],"sourcesContent":["import React from 'react'\nimport './ReceiveModal.css';\nimport Modal from '../components/Modal'\nimport Wallet from '../services/Wallet'\nimport GhostButton from '../components/buttons/GhostButton'\nimport {copyToClipboard} from \"../utils/Utils\";\nimport Alerts from '../services/Alerts'\nimport {getNetworkFaucetId, getNetworkName} from \"../constants/Networks\";\nimport Dnero from \"../services/Dnero\";\nimport Api from \"../services/Api\";\nimport _ from 'lodash';\nimport Warning from \"../components/Warning\";\nimport {Urls} from \"../constants/Urls\";\nimport Config from '../Config';\nimport TransportWebUSB from \"@ledgerhq/hw-transport-webusb\";\nimport TransportU2F from \"@ledgerhq/hw-transport-u2f\";\nimport Eth from \"@ledgerhq/hw-app-eth\";\n\nexport default class ReceiveModal extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            isLoading: false\n        };\n    }\n\n    handleCopyAddressClick = () => {\n        let address = Wallet.getWalletAddress();\n\n        copyToClipboard(address);\n\n        Alerts.showSuccess(\"Your address has been copied\");\n    };\n\n    handleDisplayOnLedgerClick = async () => {\n        try {\n            Alerts.showSuccess(\"Your address will be displayed on Ledger device\");\n            let transport;\n            if(navigator.userAgent.toLowerCase().indexOf('firefox') > -1){\n                transport = await TransportU2F.create();\n            }\n            else {\n                transport = await TransportWebUSB.create();\n            }\n            var eth = new Eth(transport);\n            await eth.getAddress(Wallet.getWalletPath(), true, false);\n        } catch(e) {\n            Alerts.showSuccess(\"Rejected, please refresh to change address\");\n        }\n    };\n\n    handleFaucetClick = async () => {\n        this.setState({\n            isLoading: true\n        });\n\n        try {\n            const response = await Api.callFaucet(Wallet.getWalletAddress(), getNetworkFaucetId(Dnero.getChainID()));\n            const responseJSON = await response.json();\n\n            if (_.get(responseJSON, 'message')) {\n                Alerts.showSuccess(\"Your DTOKEN has been sent.\");\n            }\n        } catch (e) {\n            Alerts.showError(\"You have exceeded the faucet limit\");\n        } finally {\n            this.setState({\n                isLoading: false\n            });\n        }\n    };\n\n    render() {\n        const {isLoading} = this.state;\n        let address = Wallet.getWalletAddress();\n        let qrCodeURL = `https://chart.googleapis.com/chart?chs=160x160&cht=qr&chl=${address}&choe=UTF-8&chld=L|0`;\n        let hasFaucet = (_.isNil(getNetworkFaucetId(Dnero.getChainID())) === false);\n\n        return (\n            <Modal>\n                <div className=\"ReceiveModal\">\n                    <div className=\"ModalTitle\">\n                        Receive\n                    </div>\n                    <Warning message={'Do not send ETH or ERC20 tokens to this address.'}\n                             learnMoreHref={Urls.PreventingLostTokens}\n                             style={{marginBottom: 30}}\n                    />\n                    <div className=\"ReceiveModal__public-address-title\">\n                        My Public Address\n                    </div>\n                    <div className=\"ReceiveModal__public-address\">\n                        {address}\n                    </div>\n                    <div className=\"ReceiveModal__buttons\">\n                        <GhostButton title=\"Copy\"\n                                     iconUrl=\"/img/icons/copy@2x.png\"\n                                     onClick={this.handleCopyAddressClick}\n                        />\n                    </div>\n                    {Wallet.getWalletHardware() ==='ledger' &&\n                    <div className=\"ReceiveModal__buttons\">\n                        <GhostButton title=\"Display on Ledger\"\n                                     onClick={this.handleDisplayOnLedgerClick}\n                        />\n                    </div>\n                     }\n                    <img src={qrCodeURL}\n                         className=\"ReceiveModal__qr\"\n                    />\n\n                    {\n                        hasFaucet && Config.faucetAvailable &&\n                        <div className=\"ReceiveModal__faucet\">\n                            <GhostButton title=\"Faucet\"\n                                         disabled={isLoading}\n                                         loading={isLoading}\n                                         className={\"ReceiveModal__faucet-button\"}\n                                         iconUrl=\"/img/tab-bar/receive@2x.png\"\n                                         onClick={this.handleFaucetClick}\n                            />\n                            <div className=\"ReceiveModal__faucet-message\">\n                                Receive a small amount of DTOKEN on {getNetworkName(Dnero.getChainID())}\n                            </div>\n                        </div>\n                    }\n                </div>\n            </Modal>\n        )\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}