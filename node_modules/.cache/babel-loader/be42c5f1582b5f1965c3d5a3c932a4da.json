{"ast":null,"code":"/*! await-timeout v0.2.0 */\n!function (e, t) {\n  \"object\" == typeof exports && \"object\" == typeof module ? module.exports = t() : \"function\" == typeof define && define.amd ? define([], t) : \"object\" == typeof exports ? exports.AwaitTimeout = t() : e.AwaitTimeout = t();\n}(this, function () {\n  return function (e) {\n    var t = {};\n\n    function n(r) {\n      if (t[r]) return t[r].exports;\n      var o = t[r] = {\n        i: r,\n        l: !1,\n        exports: {}\n      };\n      return e[r].call(o.exports, o, o.exports, n), o.l = !0, o.exports;\n    }\n\n    return n.m = e, n.c = t, n.d = function (e, t, r) {\n      n.o(e, t) || Object.defineProperty(e, t, {\n        enumerable: !0,\n        get: r\n      });\n    }, n.r = function (e) {\n      \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n        value: \"Module\"\n      }), Object.defineProperty(e, \"__esModule\", {\n        value: !0\n      });\n    }, n.t = function (e, t) {\n      if (1 & t && (e = n(e)), 8 & t) return e;\n      if (4 & t && \"object\" == typeof e && e && e.__esModule) return e;\n      var r = Object.create(null);\n      if (n.r(r), Object.defineProperty(r, \"default\", {\n        enumerable: !0,\n        value: e\n      }), 2 & t && \"string\" != typeof e) for (var o in e) n.d(r, o, function (t) {\n        return e[t];\n      }.bind(null, o));\n      return r;\n    }, n.n = function (e) {\n      var t = e && e.__esModule ? function () {\n        return e.default;\n      } : function () {\n        return e;\n      };\n      return n.d(t, \"a\", t), t;\n    }, n.o = function (e, t) {\n      return Object.prototype.hasOwnProperty.call(e, t);\n    }, n.p = \"\", n(n.s = 0);\n  }([function (e, t, n) {\n    \"use strict\";\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    });\n\n    var r = function () {\n      function e(e, t) {\n        for (var n = 0; n < t.length; n++) {\n          var r = t[n];\n          r.enumerable = r.enumerable || !1, r.configurable = !0, \"value\" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);\n        }\n      }\n\n      return function (t, n, r) {\n        return n && e(t.prototype, n), r && e(t, r), t;\n      };\n    }(),\n        o = n(1);\n\n    var u = function () {\n      function e() {\n        !function (e, t) {\n          if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n        }(this, e), this._id = null;\n      }\n\n      return r(e, [{\n        key: \"set\",\n        value: function (e) {\n          var t = this,\n              n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : \"\";\n          return new Promise(function (r, o) {\n            t.clear();\n            var u = n ? function () {\n              return o(new Error(n));\n            } : r;\n            t._id = setTimeout(u, e);\n          });\n        }\n      }, {\n        key: \"wrap\",\n        value: function (e, t) {\n          var n = this,\n              r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : \"\",\n              u = (0, o.promiseFinally)(e, function () {\n            return n.clear();\n          }),\n              i = this.set(t, r);\n          return Promise.race([u, i]);\n        }\n      }, {\n        key: \"clear\",\n        value: function () {\n          this._id && clearTimeout(this._id);\n        }\n      }]), e;\n    }();\n\n    u.set = function (e, t) {\n      return new u().set(e, t);\n    }, u.wrap = function (e, t, n) {\n      return new u().wrap(e, t, n);\n    }, t.default = u, e.exports = t.default;\n  }, function (e, t, n) {\n    \"use strict\";\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    }), t.promiseFinally = function (e, t) {\n      return Promise.resolve(e).then(function (e) {\n        return t(), e;\n      }, function (e) {\n        return t(), Promise.reject(e);\n      });\n    };\n  }]);\n});","map":{"version":3,"sources":["webpack://AwaitTimeout/webpack/universalModuleDefinition","webpack://AwaitTimeout/webpack/bootstrap","webpack://AwaitTimeout/src/index.js","webpack://AwaitTimeout/src/utils.js"],"names":["module","define","exports","root","this","i","l","modules","__webpack_require__","Object","enumerable","value","bind","_utils","Timeout","_classCallCheck","_id","ms","msg","Promise","resolve","reject","_this","clear","fn","Error","setTimeout","promise","wrappedPromise","_this2","timer","set","race","clearTimeout","wrap","promiseFinally","result","e","then"],"mappings":"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","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"AwaitTimeout\"] = factory();\n\telse\n\t\troot[\"AwaitTimeout\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/**\n * Promise-based replacement for setTimeout / clearTimeout.\n */\n\nimport {promiseFinally} from './utils';\n\nclass Timeout {\n  constructor() {\n    this._id = null;\n  }\n\n  set(ms, msg = '') {\n    return new Promise((resolve, reject) => {\n      this.clear();\n      const fn = msg ? () => reject(new Error(msg)) : resolve;\n      this._id = setTimeout(fn, ms);\n    });\n  }\n\n  wrap(promise, ms, msg = '') {\n    const wrappedPromise = promiseFinally(promise, () => this.clear());\n    const timer = this.set(ms, msg);\n    return Promise.race([wrappedPromise, timer]);\n  }\n\n  clear() {\n    if (this._id) {\n      clearTimeout(this._id);\n    }\n  }\n}\n\nTimeout.set = function (ms, msg) {\n  return new Timeout().set(ms, msg);\n};\n\nTimeout.wrap = function (promise, ms, msg) {\n  return new Timeout().wrap(promise, ms, msg);\n};\n\nexport default Timeout;\n","export function promiseFinally(promise, fn) {\n  const success = result => {\n    fn();\n    return result;\n  };\n  const error = e => {\n    fn();\n    return Promise.reject(e);\n  };\n  return Promise.resolve(promise).then(success, error);\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}