{"ast":null,"code":"var _jsxFileName = \"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/src/pages/SettingsPage.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport _ from 'lodash';\nimport React from \"react\";\nimport './SettingsPage.css';\nimport PageHeader from \"../components/PageHeader\";\nimport GradientButton from \"../components/buttons/GradientButton\";\nimport Wallet from '../services/Wallet';\nimport { downloadFile } from \"../utils/Utils\";\nimport Alerts from '../services/Alerts';\n\nclass ExportKeystoreContent extends React.Component {\n  constructor() {\n    super();\n    this.defaultState = {\n      currentPassword: '',\n      password: '',\n      passwordConfirmation: '',\n      loading: false,\n      error: null\n    };\n    this.state = this.defaultState;\n    this.handleChange = this.handleChange.bind(this);\n    this.prepareForExport = this.prepareForExport.bind(this);\n    this.exportKeystore = this.exportKeystore.bind(this);\n  }\n\n  validate() {\n    if (this.state.password.length > 0 && this.state.passwordConfirmation.length > 0 && this.state.password !== this.state.passwordConfirmation) {\n      this.setState({\n        error: \"Your passwords do not match\"\n      });\n    } else {\n      this.setState({\n        error: \"\"\n      });\n    }\n  }\n\n  isValid() {\n    return this.state.password.length > 0 && this.state.passwordConfirmation.length > 0 && this.state.password === this.state.passwordConfirmation;\n  }\n\n  handleChange(event) {\n    let name = event.target.name;\n    let value = event.target.value;\n    this.setState({\n      [name]: value\n    }, this.validate);\n  }\n\n  exportKeystore() {\n    try {\n      let keystore = Wallet.exportKeystore(this.state.currentPassword, this.state.password);\n      downloadFile(keystore.address + '.keystore', JSON.stringify(keystore));\n      this.setState(this.defaultState);\n    } catch (e) {\n      this.setState({\n        loading: false\n      });\n      Alerts.showError(e.message);\n    }\n  }\n\n  prepareForExport() {\n    this.setState({\n      loading: true\n    });\n    setTimeout(this.exportKeystore, 1000);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ExportKeystoreContent\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"InputTitle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }\n    }, \"Current Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"RoundedInput\",\n      placeholder: \"Enter current password\",\n      name: \"currentPassword\",\n      type: \"password\",\n      value: this.state.currentPassword,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"InputTitle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }\n    }, \"New Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"RoundedInput\",\n      placeholder: \"Set a New Password\",\n      name: \"password\",\n      type: \"password\",\n      value: this.state.password,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"InputTitle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }\n    }, \"Confirm New Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"RoundedInput\",\n      placeholder: \"Re-enter Password\",\n      name: \"passwordConfirmation\",\n      type: \"password\",\n      value: this.state.passwordConfirmation,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"InputError\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }\n    }, this.state.error), /*#__PURE__*/React.createElement(GradientButton, {\n      title: \"Export Keystore\",\n      onClick: this.prepareForExport,\n      style: {\n        marginTop: 15\n      },\n      loading: this.state.loading,\n      disabled: this.state.loading || this.isValid() === false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }\n    }));\n  }\n\n  // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {\n    // @ts-ignore\n    this[key] = eval(code);\n  }\n\n}\n\nclass SettingsSection extends React.Component {\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"SettingsSection\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"SettingsSection__title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }\n    }, this.props.title), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"SettingsSection__content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }\n    }, this.props.children));\n  }\n\n  // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {\n    // @ts-ignore\n    this[key] = eval(code);\n  }\n\n}\n\nclass SettingsPage extends React.Component {\n  render() {\n    let canExport = _.isNil(Wallet.getWallet().hardware);\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"SettingsPage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"SettingsPage__detail-view\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(PageHeader, {\n      title: \"Settings\",\n      sticky: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 21\n      }\n    }), canExport && /*#__PURE__*/React.createElement(SettingsSection, {\n      title: \"Export Keystore\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(ExportKeystoreContent, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 29\n      }\n    }))));\n  }\n\n  // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {\n    // @ts-ignore\n    this[key] = eval(code);\n  }\n\n}\n\nconst _default = SettingsPage;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(ExportKeystoreContent, \"ExportKeystoreContent\", \"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/src/pages/SettingsPage.js\");\n  reactHotLoader.register(SettingsSection, \"SettingsSection\", \"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/src/pages/SettingsPage.js\");\n  reactHotLoader.register(SettingsPage, \"SettingsPage\", \"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/src/pages/SettingsPage.js\");\n  reactHotLoader.register(_default, \"default\", \"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/src/pages/SettingsPage.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"names":["_","React","PageHeader","GradientButton","Wallet","downloadFile","Alerts","ExportKeystoreContent","Component","constructor","defaultState","currentPassword","password","passwordConfirmation","loading","error","state","handleChange","bind","prepareForExport","exportKeystore","validate","length","setState","isValid","event","name","target","value","keystore","address","JSON","stringify","e","showError","message","setTimeout","render","marginTop","SettingsSection","props","title","children","SettingsPage","canExport","isNil","getWallet","hardware"],"sources":["/Users/jjestrella/DNERO_Protocol/dnerowebwallet/src/pages/SettingsPage.js"],"sourcesContent":["import _ from 'lodash';\nimport React from \"react\";\nimport './SettingsPage.css';\nimport PageHeader from \"../components/PageHeader\";\nimport GradientButton from \"../components/buttons/GradientButton\";\nimport Wallet from '../services/Wallet';\nimport {downloadFile} from \"../utils/Utils\";\nimport Alerts from '../services/Alerts';\n\nclass ExportKeystoreContent extends React.Component {\n    constructor(){\n        super();\n\n        this.defaultState = {\n            currentPassword: '',\n            password: '',\n            passwordConfirmation:  '',\n\n            loading: false,\n\n            error: null\n        };\n\n        this.state = this.defaultState;\n\n        this.handleChange = this.handleChange.bind(this);\n        this.prepareForExport = this.prepareForExport.bind(this);\n        this.exportKeystore = this.exportKeystore.bind(this);\n    }\n\n    validate(){\n        if(this.state.password.length > 0 &&\n            this.state.passwordConfirmation.length > 0 &&\n            this.state.password !== this.state.passwordConfirmation){\n            this.setState({error: \"Your passwords do not match\"});\n        }\n        else{\n            this.setState({error: \"\"});\n        }\n    }\n\n    isValid(){\n        return (this.state.password.length > 0 &&\n            this.state.passwordConfirmation.length > 0 &&\n            this.state.password === this.state.passwordConfirmation);\n    }\n\n    handleChange(event) {\n        let name = event.target.name;\n        let value = event.target.value;\n\n        this.setState({[name]: value}, this.validate);\n    }\n\n    exportKeystore(){\n        try {\n            let keystore = Wallet.exportKeystore(this.state.currentPassword, this.state.password);\n\n            downloadFile(keystore.address + '.keystore', JSON.stringify(keystore));\n\n            this.setState(this.defaultState);\n        }\n        catch (e) {\n            this.setState({\n                loading: false\n            });\n\n            Alerts.showError(e.message);\n        }\n\n    }\n\n    prepareForExport(){\n        this.setState({\n            loading: true\n        });\n\n        setTimeout(this.exportKeystore, 1000);\n    }\n\n    render() {\n        return (\n            <div className=\"ExportKeystoreContent\">\n                <div className=\"InputTitle\">Current Password</div>\n                <input className=\"RoundedInput\"\n                       placeholder=\"Enter current password\"\n                       name=\"currentPassword\"\n                       type=\"password\"\n                       value={this.state.currentPassword}\n                       onChange={this.handleChange}\n                />\n                <div className=\"InputTitle\">New Password</div>\n                <input className=\"RoundedInput\"\n                       placeholder=\"Set a New Password\"\n                       name=\"password\"\n                       type=\"password\"\n                       value={this.state.password}\n                       onChange={this.handleChange}\n                />\n                <div className=\"InputTitle\">Confirm New Password</div>\n                <input className=\"RoundedInput\"\n                       placeholder=\"Re-enter Password\"\n                       name=\"passwordConfirmation\"\n                       type=\"password\"\n                       value={this.state.passwordConfirmation}\n                       onChange={this.handleChange}\n                />\n                <div className=\"InputError\">\n                    {this.state.error}\n                </div>\n\n                <GradientButton title=\"Export Keystore\"\n                                onClick={this.prepareForExport}\n                                style={{marginTop: 15}}\n                                loading={this.state.loading}\n                                disabled={(this.state.loading || this.isValid() === false)}\n                />\n            </div>\n        );\n    }\n}\n\nclass SettingsSection extends React.Component {\n    render() {\n        return (\n            <div className=\"SettingsSection\">\n                <div className=\"SettingsSection__title\">\n                    {this.props.title}\n                </div>\n\n                <div className=\"SettingsSection__content\">\n                    { this.props.children }\n                </div>\n            </div>\n        );\n    }\n}\n\nclass SettingsPage extends React.Component {\n    render() {\n        let canExport = _.isNil(Wallet.getWallet().hardware);\n\n        return (\n            <div className=\"SettingsPage\">\n                <div className=\"SettingsPage__detail-view\">\n                    <PageHeader title=\"Settings\"\n                                sticky={true}\n                    />\n\n                    {\n                        canExport &&\n                        <SettingsSection title=\"Export Keystore\">\n                            <ExportKeystoreContent/>\n                        </SettingsSection>\n                    }\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default SettingsPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}